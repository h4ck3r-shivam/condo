// auto generated by kmigrator
// KMIGRATOR:0147_remove_ticket_categoryclassifier_and_more:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDQuMC40IG9uIDIwMjItMDctMTMgMDU6NDYKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAxNDZfYjJiYXBwX2lzZ2xvYmFsX2IyYmFwcGhpc3RvcnlyZWNvcmRfaXNnbG9iYWwnKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J2NhdGVnb3J5Q2xhc3NpZmllcicsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXQnLAogICAgICAgICAgICBuYW1lPSdwbGFjZUNsYXNzaWZpZXInLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0JywKICAgICAgICAgICAgbmFtZT0ncHJvYmxlbUNsYXNzaWZpZXInLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nY2F0ZWdvcnlDbGFzc2lmaWVyRGlzcGxheU5hbWVGcm9tJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J2NhdGVnb3J5Q2xhc3NpZmllckRpc3BsYXlOYW1lVG8nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nY2F0ZWdvcnlDbGFzc2lmaWVySWRGcm9tJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J2NhdGVnb3J5Q2xhc3NpZmllcklkVG8nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ncGxhY2VDbGFzc2lmaWVyRGlzcGxheU5hbWVGcm9tJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J3BsYWNlQ2xhc3NpZmllckRpc3BsYXlOYW1lVG8nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ncGxhY2VDbGFzc2lmaWVySWRGcm9tJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J3BsYWNlQ2xhc3NpZmllcklkVG8nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ncHJvYmxlbUNsYXNzaWZpZXJEaXNwbGF5TmFtZUZyb20nLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0ncHJvYmxlbUNsYXNzaWZpZXJEaXNwbGF5TmFtZVRvJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J3Byb2JsZW1DbGFzc2lmaWVySWRGcm9tJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J3Byb2JsZW1DbGFzc2lmaWVySWRUbycsCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nY2F0ZWdvcnlDbGFzc2lmaWVyJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSdwbGFjZUNsYXNzaWZpZXInLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3Byb2JsZW1DbGFzc2lmaWVyJywKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldGNoYW5nZScsCiAgICAgICAgICAgIG5hbWU9J2NsYXNzaWZpZXJSdWxlRGlzcGxheU5hbWVGcm9tJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nY2xhc3NpZmllclJ1bGVEaXNwbGF5TmFtZVRvJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGlja2V0Y2hhbmdlJywKICAgICAgICAgICAgbmFtZT0nY2xhc3NpZmllclJ1bGVJZEZyb20nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVVVJREZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0aWNrZXRjaGFuZ2UnLAogICAgICAgICAgICBuYW1lPSdjbGFzc2lmaWVyUnVsZUlkVG8nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVVVJREZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Remove field categoryClassifier from ticket
--
SET CONSTRAINTS "Ticket_categoryClassifier_e01aafa7_fk_TicketCat" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_categoryClassifier_e01aafa7_fk_TicketCat";
ALTER TABLE "Ticket" DROP COLUMN "categoryClassifier" CASCADE;
--
-- Remove field placeClassifier from ticket
--
SET CONSTRAINTS "Ticket_placeClassifier_01e3ec3a_fk_TicketPlaceClassifier_id" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_placeClassifier_01e3ec3a_fk_TicketPlaceClassifier_id";
ALTER TABLE "Ticket" DROP COLUMN "placeClassifier" CASCADE;
--
-- Remove field problemClassifier from ticket
--
SET CONSTRAINTS "Ticket_problemClassifier_f1bfcd39_fk_TicketProblemClassifier_id" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_problemClassifier_f1bfcd39_fk_TicketProblemClassifier_id";
ALTER TABLE "Ticket" DROP COLUMN "problemClassifier" CASCADE;
--
-- Remove field categoryClassifierDisplayNameFrom from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "categoryClassifierDisplayNameFrom" CASCADE;
--
-- Remove field categoryClassifierDisplayNameTo from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "categoryClassifierDisplayNameTo" CASCADE;
--
-- Remove field categoryClassifierIdFrom from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "categoryClassifierIdFrom" CASCADE;
--
-- Remove field categoryClassifierIdTo from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "categoryClassifierIdTo" CASCADE;
--
-- Remove field placeClassifierDisplayNameFrom from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "placeClassifierDisplayNameFrom" CASCADE;
--
-- Remove field placeClassifierDisplayNameTo from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "placeClassifierDisplayNameTo" CASCADE;
--
-- Remove field placeClassifierIdFrom from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "placeClassifierIdFrom" CASCADE;
--
-- Remove field placeClassifierIdTo from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "placeClassifierIdTo" CASCADE;
--
-- Remove field problemClassifierDisplayNameFrom from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "problemClassifierDisplayNameFrom" CASCADE;
--
-- Remove field problemClassifierDisplayNameTo from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "problemClassifierDisplayNameTo" CASCADE;
--
-- Remove field problemClassifierIdFrom from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "problemClassifierIdFrom" CASCADE;
--
-- Remove field problemClassifierIdTo from ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "problemClassifierIdTo" CASCADE;
--
-- Remove field categoryClassifier from tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "categoryClassifier" CASCADE;
--
-- Remove field placeClassifier from tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "placeClassifier" CASCADE;
--
-- Remove field problemClassifier from tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" DROP COLUMN "problemClassifier" CASCADE;
--
-- Add field classifierRuleDisplayNameFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "classifierRuleDisplayNameFrom" text NULL;
--
-- Add field classifierRuleDisplayNameTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "classifierRuleDisplayNameTo" text NULL;
--
-- Add field classifierRuleIdFrom to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "classifierRuleIdFrom" uuid NULL;
--
-- Add field classifierRuleIdTo to ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "classifierRuleIdTo" uuid NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field classifierRuleIdTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "classifierRuleIdTo" CASCADE;
--
-- Add field classifierRuleIdFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "classifierRuleIdFrom" CASCADE;
--
-- Add field classifierRuleDisplayNameTo to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "classifierRuleDisplayNameTo" CASCADE;
--
-- Add field classifierRuleDisplayNameFrom to ticketchange
--
ALTER TABLE "TicketChange" DROP COLUMN "classifierRuleDisplayNameFrom" CASCADE;
--
-- Remove field problemClassifier from tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "problemClassifier" uuid NULL;
--
-- Remove field placeClassifier from tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "placeClassifier" uuid NULL;
--
-- Remove field categoryClassifier from tickethistoryrecord
--
ALTER TABLE "TicketHistoryRecord" ADD COLUMN "categoryClassifier" uuid NULL;
--
-- Remove field problemClassifierIdTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "problemClassifierIdTo" uuid NULL;
--
-- Remove field problemClassifierIdFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "problemClassifierIdFrom" uuid NULL;
--
-- Remove field problemClassifierDisplayNameTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "problemClassifierDisplayNameTo" text NULL;
--
-- Remove field problemClassifierDisplayNameFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "problemClassifierDisplayNameFrom" text NULL;
--
-- Remove field placeClassifierIdTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "placeClassifierIdTo" uuid NULL;
--
-- Remove field placeClassifierIdFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "placeClassifierIdFrom" uuid NULL;
--
-- Remove field placeClassifierDisplayNameTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "placeClassifierDisplayNameTo" text NULL;
--
-- Remove field placeClassifierDisplayNameFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "placeClassifierDisplayNameFrom" text NULL;
--
-- Remove field categoryClassifierIdTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "categoryClassifierIdTo" uuid NULL;
--
-- Remove field categoryClassifierIdFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "categoryClassifierIdFrom" uuid NULL;
--
-- Remove field categoryClassifierDisplayNameTo from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "categoryClassifierDisplayNameTo" text NULL;
--
-- Remove field categoryClassifierDisplayNameFrom from ticketchange
--
ALTER TABLE "TicketChange" ADD COLUMN "categoryClassifierDisplayNameFrom" text NULL;
--
-- Remove field problemClassifier from ticket
--
ALTER TABLE "Ticket" ADD COLUMN "problemClassifier" uuid NULL CONSTRAINT "Ticket_problemClassifier_f1bfcd39_fk_TicketProblemClassifier_id" REFERENCES "TicketProblemClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_problemClassifier_f1bfcd39_fk_TicketProblemClassifier_id" IMMEDIATE;
--
-- Remove field placeClassifier from ticket
--
ALTER TABLE "Ticket" ADD COLUMN "placeClassifier" uuid NULL CONSTRAINT "Ticket_placeClassifier_01e3ec3a_fk_TicketPlaceClassifier_id" REFERENCES "TicketPlaceClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_placeClassifier_01e3ec3a_fk_TicketPlaceClassifier_id" IMMEDIATE;
--
-- Remove field categoryClassifier from ticket
--
ALTER TABLE "Ticket" ADD COLUMN "categoryClassifier" uuid NULL CONSTRAINT "Ticket_categoryClassifier_e01aafa7_fk_TicketCat" REFERENCES "TicketCategoryClassifier"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Ticket_categoryClassifier_e01aafa7_fk_TicketCat" IMMEDIATE;
CREATE INDEX "Ticket_problemClassifier_f1bfcd39" ON "Ticket" ("problemClassifier");
CREATE INDEX "Ticket_placeClassifier_01e3ec3a" ON "Ticket" ("placeClassifier");
CREATE INDEX "Ticket_categoryClassifier_e01aafa7" ON "Ticket" ("categoryClassifier");
COMMIT;

    `)
}
